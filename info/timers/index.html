<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Timers - MRover ESW</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Timers";
        var mkdocs_page_input_path = "info/timers.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MRover ESW
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/stm32cubeide/">STM32CubeIDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Starter Projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../getting-started/starter/led/">LED</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Servo</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../getting-started/starter/servo/part1-pwm/">Part 1 - PWM</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../getting-started/starter/servo/part2-can/">Part 2 - CAN</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../getting-started/starter/temp-humidity/">Temp-Humidity</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Projects</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../projects/overview26/">ESW 2025-2026 Projects</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Useful Information</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Timers</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#configuring-a-timer">Configuring a Timer</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#prescaler-psc">Prescaler (PSC)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#counter-period-auto-reload-register-or-arr">Counter Period (Auto-Reload Register, or ARR)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#count-compare-register-ccr">Count &amp; Compare Register (CCR)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#use-cases">Use Cases</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#periodic-timer">Periodic Timer</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#input-capture">Input-Capture</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#output-capture">Output-Capture</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pwm">PWM</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#what-is-pwm">What is PWM?</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#why-do-we-use-pwm">Why do we use PWM?</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configuring-a-stm32-pwm-timer">Configuring a STM32 PWM timer</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../communication-protocols/">Communication Protocols</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../brushed/">Brushed Motors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../brushless/">Brushless Motors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../science/">Science</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nucleos/">Nucleo Information</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../stm32-boot/">STM32 Boot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cmake-tools/">CMake Toolchain</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Headers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../headers/hardware/">hardware.hpp</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MRover ESW</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Useful Information</li>
      <li class="breadcrumb-item active">Timers</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/umrover/mrover-esw/edit/master/docs/info/timers.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="timers">Timers</h1>
<p>The following information is for STM32 timers. You will find similar concepts with different
microcontrollers; however, the terminology and specifics may differ.</p>
<h2 id="configuring-a-timer">Configuring a Timer</h2>
<p>There are three main parts that can control the behavior of a timer:</p>
<ol>
<li>Prescaler (PSC)</li>
<li>Counter Period (also Auto-Reload Register, or ARR)</li>
<li>Count &amp; Compare Register (CCR)</li>
</ol>
<p>Let's break down each one:</p>
<h3 id="prescaler-psc">Prescaler (PSC)</h3>
<p>This value determines the frequency of the timer. The timer frequency is calculated by the
following equation: <code>Clock Frequency / (PSC+1)</code>.</p>
<p>For example, if our clock frequency is 72 MHz and we set PSC = 71, our timer will tick at a
frequency of 1 MHz.</p>
<h3 id="counter-period-auto-reload-register-or-arr">Counter Period (Auto-Reload Register, or ARR)</h3>
<p>This defines the number of ticks in one period. The period is calculated by the following equation:
<code>(1 / Timer Frequency) * (ARR + 1)</code>.</p>
<p>For example, if our timer frequency is 1 MHz, then the timer will tick every 1000 ns. So, if we
set the ARR = 4999, our period will be 0.005 seconds (<code>1000 ns * (4999 + 1) = 0.005 s</code>).</p>
<h3 id="count-compare-register-ccr">Count &amp; Compare Register (CCR)</h3>
<p>This register holds a specific value that the timer tick counter is compared against. When the
counter reaches the value in the CCR, an event is triggered, such as an interrupt or output signal
change, which is commonly used for tasks like PWM generation or input capture.</p>
<h2 id="use-cases">Use Cases</h2>
<h3 id="periodic-timer">Periodic Timer</h3>
<h3 id="input-capture">Input-Capture</h3>
<h3 id="output-capture">Output-Capture</h3>
<h3 id="pwm">PWM</h3>
<h4 id="what-is-pwm">What is PWM?</h4>
<p>PWM (pulse width modulation) is a digital signal that is set to high and low for a set amount of
time to represent a percentage.</p>
<h4 id="why-do-we-use-pwm">Why do we use PWM?</h4>
<p>Over a wire, we can only send a value of 0 (low voltage) or 1 (high voltage). However, let's say
that I want to control the percent brightness of an LED. How can I send this percentage (a value
between 0 and 1) to the LED with just a wire that can only send 0 or 1? This is where PWM comes
in. To send a value of 20% (0.20) using PWM, we first set a specified <strong>period</strong>. Then, for the
first 20% of the period, we would set the wire to 1. For the rest of the period, we set the wire to
0. This gives us a <strong>duty cycle</strong> of 20%.</p>
<h4 id="configuring-a-stm32-pwm-timer">Configuring a STM32 PWM timer</h4>
<p>For PWM, we will have to modify the PSC, ARR, and CCR registers. The PSC and ARR registers can
be modified in the <code>.ioc</code> in order to set a constant period for the PWM signal. Then, in our code
we can modify the CCR register in order to set different PWM signals. For normal PWM generation,
the PWM signal will be set high in the beginning of the period. Then, when the timer counter goes
above the value of CCR, the PWM signal will be set low.</p>
<p>If you are still confused, here's a helpful <a href="https://docs.google.com/presentation/d/1eK4ROr9wMi3IOqEUcBABVkFSWsVM56jEgm_zoR2-wio/edit?usp=drive_link">slide deck</a>
that goes more in depth. </p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../projects/overview26/" class="btn btn-neutral float-left" title="ESW 2025-2026 Projects"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../communication-protocols/" class="btn btn-neutral float-right" title="Communication Protocols">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/umrover/mrover-esw" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../projects/overview26/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../communication-protocols/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
